<app-header title="Feedback"></app-header>

<ion-content padding>
  <ion-row>
    <ion-col>
      <ion-label>
        <b
          >We value your feedback. Please send your feedback in the below
          form.</b
        >
      </ion-label>
    </ion-col>
  </ion-row>

  <form [formGroup]="feedbackForm">
    <ion-row>
      <ion-col>
        <ion-label *ngIf="!feedbackForm.value.feedbackType.Fid" class="ionic-selectable-label">Select feedback type</ion-label>
        <ionic-selectable
          formControlName="feedbackType"
          [items]="feedbackTypes"
          itemValueField="Fid"
          itemTextField="Types"
          [canSearch]="true"
        >
        </ionic-selectable>
      </ion-col>
    </ion-row>

    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.feedbackType">
        <div
          class="error-message"
          *ngIf="
            feedbackForm.get('feedbackType').hasError(validation.type) &&
            (feedbackForm.get('feedbackType').dirty ||
              feedbackForm.get('feedbackType').touched)
          "
        >
          {{ validation.message }}
        </div>
      </ng-container>
    </div>

    <ion-row>
      <ion-col>
        <ion-label *ngIf="!feedbackForm.value.feedbackTo.Fid" class="ionic-selectable-label">Select type</ion-label>
        <ionic-selectable
          formControlName="feedbackTo"
          [items]="feedbackTos"
          itemValueField="Fid"
          itemTextField="Types"
          [canSearch]="true"
        >
        </ionic-selectable>
      </ion-col>
    </ion-row>

    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.feedbackTo">
        <div
          class="error-message"
          *ngIf="
            feedbackForm.get('feedbackTo').hasError(validation.type) &&
            (feedbackForm.get('feedbackTo').dirty ||
              feedbackForm.get('feedbackTo').touched)
          "
        >
          {{ validation.message }}
        </div>
      </ng-container>
    </div>

    <pr-select-store></pr-select-store>

    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.toStoreId">
        <div
          class="error-message"
          *ngIf="
            feedbackForm.get('toStoreId').hasError(validation.type) &&
            (feedbackForm.get('toStoreId').dirty ||
              feedbackForm.get('toStoreId').touched)
          "
        >
          {{ validation.message }}
        </div>
      </ng-container>
    </div>

    <ion-row>
      <ion-col>
        <ion-textarea
          formControlName="message"
          rows="6"
          cols="12"
          placeholder="Type your message"
        ></ion-textarea>
      </ion-col>
    </ion-row>

    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.message">
        <div
          class="error-message"
          *ngIf="
            feedbackForm.get('message').hasError(validation.type) &&
            (feedbackForm.get('message').dirty ||
              feedbackForm.get('message').touched)
          "
        >
          {{ validation.message }}
        </div>
      </ng-container>
    </div>

    <br />

    <ion-row>
      <ion-col size="6" class="signin">
        <app-back-button [link]="['/dashboard']"></app-back-button>
      </ion-col>
      <ion-col size="6" class="create">
        <app-submit-button (click)="sendFeedback()"></app-submit-button>
      </ion-col>
    </ion-row>
  </form>
</ion-content>

<app-footer></app-footer>
